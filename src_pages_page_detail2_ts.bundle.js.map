{"version":3,"file":"src_pages_page_detail2_ts.bundle.js","mappings":";;;;;;;;;;;;;AAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;AC5BO;AACP;AACA;AACA;AACA;AACA;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACO;AACP;AACA;AACA;AACA;AACO;AACP;AACA;AACA;AACO;AACP;AACA;AACA;AACe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;ACzFA,iBAAiB,SAAI,IAAI,SAAI;AAC7B,4BAA4B,+DAA+D,iBAAiB;AAC5G;AACA,oCAAoC,MAAM,+BAA+B,YAAY;AACrF,mCAAmC,MAAM,mCAAmC,YAAY;AACxF,gCAAgC;AAChC;AACA,KAAK;AACL;AAC6C;AAC+F;AACF;AACvG;AACc;AACM;AACA;AACV;AACM;AACnD;AACA;AACA,uBAAuB,8DAAe;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ,2DAAQ;AAChB;AACA;AACA;AACA,qBAAqB,8DAAW;AAChC;AACA,YAAY,8DAAW,oBAAoB,iDAAQ,CAAC,8CAAW;AAC/D;AACA;AACA;AACA;AACA,QAAQ,2DAAQ;AAChB;AACA;AACA,YAAY,6CAAU,CAAC,qEAAgB;AACvC,YAAY,8DAAW,oBAAoB,iDAAQ,CAAC,8CAAW;AAC/D;AACA;AACA;AACA,YAAY,6CAAU,CAAC,qEAAgB;AACvC,YAAY,8DAAW,oBAAoB,iDAAQ,CAAC,8CAAW;AAC/D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B,2CAA2C;AAC3C;AACA;AACA;AACA;AACA;AACA,YAAY,8DAAW,oBAAoB,iDAAQ,CAAC,8CAAW;AAC/D;AACA;AACA;AACA;AACA,iBAAiB,qEAAgB;AACjC;AACA,6BAA6B,kEAAa;AAC1C;AACA;AACA,uCAAuC,sEAAiB;AACxD,yCAAyC,mBAAmB;AAC5D;AACA,6BAA6B,kEAAa;AAC1C;AACA;AACA,uCAAuC,sEAAiB;AACxD,yCAAyC,mBAAmB;AAC5D;AACA,6BAA6B,kEAAa;AAC1C;AACA;AACA,uCAAuC,sEAAiB;AACxD,yCAAyC,mBAAmB;AAC5D;AACA;AACA;AACA,8BAA8B,8DAAe;AAC7C,6BAA6B,yEAAoB;AACjD;AACA;AACA,iCAAiC,qEAAgB;AACjD;AACA,iBAAiB,iEAAY;AAC7B;AACA,6BAA6B,kEAAa;AAC1C;AACA;AACA,uCAAuC,sEAAiB;AACxD,yCAAyC,mBAAmB;AAC5D;AACA,6BAA6B,kEAAa;AAC1C;AACA;AACA,uCAAuC,sEAAiB;AACxD,yCAAyC,mBAAmB;AAC5D;AACA;AACA;AACA,8BAA8B,2DAAY;AAC1C,6BAA6B,qEAAgB;AAC7C;AACA;AACA,iCAAiC,qEAAgB;AACjD;AACA;AACA;AACA,gBAAgB,8DAAW,oBAAoB,iDAAQ,CAAC,8CAAW;AACnE,gBAAgB,6CAAU,CAAC,qEAAgB;AAC3C;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL","sources":["webpack://admin/./src/model/ProjectModel.ts","webpack://admin/./src/model/RealEstateModel.ts","webpack://admin/./src/pages/page_detail2.ts"],"sourcesContent":["export default class ProjectModel {\n    constructor() {\n        this.id = -1;\n        this.name = '';\n        this.address = '';\n        this.slogan = '';\n        this.description = '';\n        this.acreage = null;\n        this.constructArea = null;\n        this.numBlock = null;\n        this.numFloors = '';\n        this.numApartment = null;\n        this.apartmentArea = '';\n        this.investor = null;\n        this.constructionContractor = null;\n        this.designUnit = null;\n        this.utilities = '';\n        this.regionLink = '';\n        this.photo = '';\n        this.latitude = null;\n        this.longtitude = null;\n        this.masterLayouts = null;\n        this.realEstates = null;\n        this.province = null;\n        this.district = null;\n        this.ward = null;\n        this.street = null;\n    }\n}\n","export const RealEstateStatus = {\n    0: 'Unverified',\n    1: 'Success',\n    2: 'Sold',\n    3: 'Taken down',\n    4: 'Denied'\n};\nexport const RealEstateType = {\n    0: 'Land',\n    1: 'House',\n    2: 'Apartment',\n    3: 'Office',\n    4: 'Buisness Premise',\n    5: 'Boarding house'\n};\nexport const RealEstateFurniture = {\n    0: 'Basic',\n    1: 'Full',\n    3: 'Unknown'\n};\nexport const RealEstateRequest = {\n    0: 'Sell',\n    3: 'Rent',\n};\nexport const RealEstatePriceTime = {\n    0: 'Bình thường',\n    1: 'Bán nhanh',\n};\nexport default class RealEstateModel {\n    constructor() {\n        this.id = 0;\n        this.title = '';\n        this.type = null;\n        this.request = null;\n        this.address = '';\n        this.price = null;\n        this.priceMin = null;\n        this.priceTime = null;\n        this.createDate = null;\n        this.acreage = null;\n        this.direction = null;\n        this.totalFloors = null;\n        this.floorNumber = null;\n        this.bath = null;\n        this.apartCode = '';\n        this.wallArea = null;\n        this.bedroom = null;\n        this.balcony = null;\n        this.landscapeView = '';\n        this.apartLoca = null;\n        this.apartType = null;\n        this.furnitureType = null;\n        this.priceRent = null;\n        this.returnRate = null;\n        this.legalDoc = null;\n        this.description = '';\n        this.widthY = null;\n        this.LongX = null;\n        this.streetHouse = null;\n        this.FSBO = null;\n        this.viewNum = null;\n        this.createBy = null;\n        this.updateBy = null;\n        this.shape = '';\n        this.distanceToFacade = null;\n        this.adjacentFacadeNum = null;\n        this.adjactentRoad = '';\n        this.alleyMinWidth = null;\n        this.adjacentAlleyMinWidth = null;\n        this.factor = null;\n        this.structure = '';\n        this.DTSXD = null;\n        this.CLCL = null;\n        this.priceCTXD = null;\n        this.valueCTXD = null;\n        this.photo = '';\n        this.latitude = null;\n        this.longtitude = null;\n        this.street = null;\n        this.province = null;\n        this.district = null;\n        this.ward = null;\n        this.project = null;\n        this.customer = null;\n        this.addressFull = null;\n        this.yearCreate = 0;\n        this.monthCreate = 0;\n        this.dayCreate = 0;\n    }\n}\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport navigateTo, { getLanguage } from \"..\";\nimport { PATH_API_CUSTOMER, PATH_API_DISTRICT, PATH_API_PROJECT, PATH_API_PROVINCE, PATH_API_REAL_ESTATE } from \"../constants/APIConstants\";\nimport { PATH_ADDRESS_MAP, PATH_CUSTOMER, PATH_DISTRICT, PATH_PROJECT, PATH_PROVINCE, PATH_REAL_ESTATE } from \"../constants/webConstants\";\nimport language from \"../language\";\nimport ProjectModel from \"../model/ProjectModel\";\nimport RealEstateModel from \"../model/RealEstateModel\";\nimport PageInteraction from \"../utilities/Interaction\";\nimport MyLogger from \"../utilities/MyLogger\";\nimport MyUtilities from \"../utilities/MyUtilities\";\n// REGION 1: Global variables and configuration\n/** Main page interaction controller for dynamic configuration */\nvar gInteraction = new PageInteraction();\n/**\n * Data transformation configuration for enhanced table display\n * Currently configured to display province name in related records\n */\nvar gTransformData = [\n    {\n        name: 'province',\n        fields: 'name' // Display province name for location context\n    }\n];\n/**\n * Dynamic Detail Page with Parent-Child Relationships\n *\n * This module handles dynamic detail pages that display child records filtered\n * by parent entity relationships. It analyzes URL parameters to determine\n * the parent-child relationship and configures the appropriate data display.\n *\n * Features:\n * - Dynamic URL parameter parsing for parent-child relationships\n * - Support for multiple entity types (Real Estate, Projects)\n * - Flexible parent filtering (Customer, Province, District)\n * - Automatic table configuration based on entity type\n * - Error handling with user feedback and navigation\n * - Search body configuration for filtered queries\n */\n// REGION 2: Element events\n// (No direct element events - handled through PageInteraction framework)\n// REGION 3: Event handlers\n// (Event handling managed by PageInteraction based on dynamic configuration)\n// REGION 4: Common functions\n/**\n * Initialize and configure the dynamic detail page\n *\n * Analyzes the current URL to determine:\n * 1. The child entity type to display (Real Estate or Projects)\n * 2. The parent entity and ID for filtering\n * 3. Appropriate API endpoints and search parameters\n *\n * Supports various parent-child relationships:\n * - Customer -> Real Estate properties\n * - Province -> Real Estate properties or Projects\n * - District -> Real Estate properties or Projects\n */\nfunction onLoad() {\n    return __awaiter(this, void 0, void 0, function* () {\n        MyLogger.log(\"Detail page 2\");\n        var vId = null;\n        var vPath = null;\n        // Validate URL matches expected detail page pattern\n        var vMatch = MyUtilities.validateDetailPagePath2();\n        if (vMatch == null) {\n            MyUtilities.showToast(\"error\", language[getLanguage()].err_path);\n            return;\n        }\n        // Parse URL search parameters to find parent entity information\n        var vUrlSearchParams = new URLSearchParams(window.location.search);\n        MyLogger.log(\"Search param:\", vUrlSearchParams);\n        // Validate search parameters exist\n        if (vUrlSearchParams == null) {\n            navigateTo(PATH_ADDRESS_MAP);\n            MyUtilities.showToast(\"error\", language[getLanguage()].err_path);\n            return;\n        }\n        if (vUrlSearchParams == null || vUrlSearchParams.size == 0) {\n            navigateTo(PATH_ADDRESS_MAP);\n            MyUtilities.showToast(\"error\", language[getLanguage()].err_path);\n            return;\n        }\n        // Extract parent entity type and ID from URL parameters\n        // Expected format: ?entity_id=123 (e.g., customer_id=456)\n        var vIterator = vUrlSearchParams.entries();\n        let result = vIterator.next();\n        while (!result.done && vId == null) {\n            var [key, value] = result.value;\n            if (key.includes('_id')) {\n                vId = value; // Extract parent entity ID\n                vPath = key.split('_')[0]; // Extract parent entity type\n            }\n            result = vIterator.next();\n        }\n        // Validate that parent entity information was found\n        if (vId == null) {\n            MyUtilities.showToast(\"error\", language[getLanguage()].err_path);\n            return;\n        }\n        // Configure page interaction based on child entity type\n        switch (vMatch[1]) {\n            case PATH_REAL_ESTATE:\n                // Configure Real Estate listings filtered by parent entity\n                if (vPath == PATH_CUSTOMER) {\n                    // Show properties belonging to specific customer\n                    gInteraction\n                        .setParentPath(PATH_API_CUSTOMER, vId)\n                        .setSearchBody({ \"customerId\": vId });\n                }\n                if (vPath == PATH_PROVINCE) {\n                    // Show properties in specific province\n                    gInteraction\n                        .setParentPath(PATH_API_PROVINCE, vId)\n                        .setSearchBody({ \"provinceId\": vId });\n                }\n                if (vPath == PATH_DISTRICT) {\n                    // Show properties in specific district\n                    gInteraction\n                        .setParentPath(PATH_API_DISTRICT, vId)\n                        .setSearchBody({ \"districtId\": vId });\n                }\n                // Configure Real Estate display\n                gInteraction\n                    .setModel(RealEstateModel)\n                    .setPath(PATH_API_REAL_ESTATE)\n                    .setTableHeaders('title', 'province')\n                    .setTableDataTransform(...gTransformData)\n                    .setViewPath(PATH_REAL_ESTATE);\n                break;\n            case PATH_PROJECT:\n                // Configure Project listings filtered by parent entity\n                if (vPath == PATH_PROVINCE) {\n                    // Show projects in specific province\n                    gInteraction\n                        .setParentPath(PATH_API_PROVINCE, vId)\n                        .setSearchBody({ \"provinceId\": vId });\n                }\n                if (vPath == PATH_DISTRICT) {\n                    // Show projects in specific district\n                    gInteraction\n                        .setParentPath(PATH_API_DISTRICT, vId)\n                        .setSearchBody({ \"districtId\": vId });\n                }\n                // Configure Project display\n                gInteraction\n                    .setModel(ProjectModel)\n                    .setPath(PATH_API_PROJECT)\n                    .setTableHeaders('name', 'province')\n                    .setTableDataTransform(...gTransformData)\n                    .setViewPath(PATH_REAL_ESTATE);\n                break;\n            default:\n                // Handle unsupported entity types\n                MyUtilities.showToast('error', language[getLanguage()].err_path);\n                navigateTo(PATH_ADDRESS_MAP);\n                return;\n        }\n        // Initialize the configured page interaction\n        gInteraction.connectButton();\n    });\n}\n/**\n * Main dynamic detail page initialization function\n *\n * Loads the detail page template and initializes the dynamic interface.\n * This is the entry point called by the routing system for parent-child\n * relationship views.\n *\n * @returns Promise that resolves when page is fully loaded and configured\n */\nexport default function MasterLayoutDetailPage() {\n    return __awaiter(this, void 0, void 0, function* () {\n        // Load the detail page template\n        var vHtml = yield fetch('/templates/page_detail2.html')\n            .then(res => res.text());\n        // Inject template into main container\n        $(\"#main-container\").html(vHtml);\n        // Initialize dynamic page functionality\n        yield onLoad();\n    });\n}\n"],"names":[],"sourceRoot":""}