{"version":3,"file":"src_pages_employee_ts.bundle.js","mappings":";;;;;;;;;;;;;;;;;;;;;AAAA,iBAAiB,SAAI,IAAI,SAAI;AAC7B,4BAA4B,+DAA+D,iBAAiB;AAC5G;AACA,oCAAoC,MAAM,+BAA+B,YAAY;AACrF,mCAAmC,MAAM,mCAAmC,YAAY;AACxF,gCAAgC;AAChC;AACA,KAAK;AACL;AAC6B;AACiC;AACmC;AAC1C;AACmB;AACvC;AACF;AACgB;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,sEAAiB;AACpC;AACA;AACA;AACA;AACA;AACA,2BAA2B,8DAAe;AAC1C,cAAc,4DAAa;AAC3B;AACA,iBAAiB,kEAAa;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,gBAAgB,mEAAiB;AACjC,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB,mEAAiB;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B,6DAAU;AACxC;AACA;AACA;AACA,0CAA0C;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,iDAAQ,CAAC,8CAAW;AAC3C,uBAAuB,iDAAQ,CAAC,8CAAW;AAC3C,uBAAuB,iDAAQ,CAAC,8CAAW;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACe;AACf;AACA;AACA,kCAAkC,oEAAe,GAAG,yEAAoB;AACxE;AACA;AACA;AACA;AACA;AACA,KAAK;AACL","sources":["webpack://admin/./src/pages/employee.ts"],"sourcesContent":["var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport '../styles/style.css';\nimport { PATH_API_EMPLOYEE } from '../constants/APIConstants';\nimport { FOLDER_TEMPLATE, TEMPLATE_VIEW_ENTITY, PATH_EMPLOYEE } from '../constants/webConstants';\nimport PageInteraction from '../utilities/Interaction';\nimport EmployeeModel, { employeeUserLevel } from '../model/EmployeeModel';\nimport language from '../language';\nimport { getLanguage } from '..';\nimport SecureAuth from '../utilities/SecureAuth';\n/**\n * Employee Management Page\n *\n * This module handles the comprehensive administrative interface for managing\n * employee data in the real estate admin system. It provides role-based access\n * control, ensuring different user levels have appropriate permissions.\n *\n * Features:\n * - Complete CRUD operations for employee records\n * - Role-based field visibility and access control\n * - Photo management for employee profiles\n * - Tabbed form interface for organized data entry\n * - Data transformation for better display (checkboxes, text mappings)\n * - Hierarchical employee relationships (reports-to structure)\n * - User level management with permission-based restrictions\n */\n// REGION 1: Global variables and configuration\n/** Primary API endpoint for employee operations */\nvar gApiMainPath = PATH_API_EMPLOYEE;\n/**\n * Main page interaction controller configured for employee management\n * Sets up the complete interface including model binding, API endpoints,\n * and view paths for employee data\n */\nvar gPageInteraction = new PageInteraction()\n    .setModel(EmployeeModel)\n    .setPath(gApiMainPath)\n    .setViewPath(PATH_EMPLOYEE);\n/**\n * Data transformation configuration for enhanced table display\n * Converts raw data into user-friendly formats including checkboxes,\n * text mappings, and concatenated fields\n */\nvar gDataTransform = [\n    {\n        name: 'activated',\n        to: 'checkbox', // Display as checkbox\n        value: 'Y' // Checked when value equals 'Y'\n    },\n    {\n        name: 'userLevel',\n        to: 'text', // Display as mapped text\n        fields: employeeUserLevel // Use enum mapping for display\n    },\n    {\n        name: 'reportsTo',\n        fields: 'firstName, lastName', // Concatenate employee names\n        separator: ' ' // Space between first and last name\n    }\n];\n/**\n * Fields to exclude from automatic form generation\n * These are typically calculated fields, sensitive data, or fields\n * handled by specialized UI components\n */\nvar gIgnoreFields = ['hireDate', 'realEstateCreated', 'realEstateUpdated',\n    'customerCreated', 'customerUpdated', 'viewRealEstates',\n    'numRealEstatesToday', 'numRealEstates', 'password',\n    'titleOfCourtesy', 'extension', 'userLevel',\n    'birthDate', 'activated', 'photo', \"reportsTo\"];\n/**\n * Table column configuration for employee data display\n * Defines which fields to show in the main employee listing table\n */\nvar gTableHeaders = ['lastName', 'firstName',\n    'title', 'birthDate', 'hireDate',\n    'address', 'city', 'region', 'postalCode', 'country',\n    'homePhone', 'photo', 'email', 'activated', 'userLevel',\n    'reportsTo'];\n/**\n * Employee user level configuration (modifiable based on current user permissions)\n * Will be filtered based on current user's role to prevent privilege escalation\n */\nvar gEmployeeLevel = employeeUserLevel;\n// REGION 2: Element events\n// (No direct element events - handled through PageInteraction framework)\n// REGION 3: Event handlers\n/**\n * Initialize and configure the employee management page\n *\n * Sets up the complete page functionality including:\n * - Role-based access control and permission filtering\n * - Table structure with employee information and transformations\n * - Form validation for required employee fields\n * - Tabbed interface for organized data entry\n * - Photo upload functionality for employee profiles\n * - User level dropdown with permission-based filtering\n * - API integration and event binding\n */\nfunction onLoad() {\n    return __awaiter(this, void 0, void 0, function* () {\n        var _a;\n        // Get current user's authentication data for role-based access control\n        var vUserInfo = (_a = SecureAuth.getUserInfo()) === null || _a === void 0 ? void 0 : _a.id;\n        // Filter available user levels based on current user's permissions\n        // Non-admin users cannot create admin accounts (prevent privilege escalation)\n        // if (!vTokenData.role[0].authority.includes(\"ADMIN\")) {\n        //     delete gEmployeeLevel[2];  // Remove admin level option\n        // }\n        // Apply data transformations for enhanced table display\n        gPageInteraction.setTableDataTransform(...gDataTransform);\n        yield gPageInteraction\n            // Set validation rules for essential employee information\n            .setRequiredFields('lastName', 'firstName', 'username', 'email', 'userLevel')\n            // Exclude system-managed and sensitive fields from form generation\n            .setIgnoreFields(...gIgnoreFields)\n            // Configure table columns for employee listing\n            .setTableHeaders(...gTableHeaders)\n            // Configure photo upload functionality for employee profiles\n            .setPhotoFields(\"photo\")\n            // Create tabbed interface for organized data entry\n            .createTab(language[getLanguage()].tab_important, 'lastName', 'firstName', 'username', 'email', 'userLevel') // Essential info\n            .createTab(language[getLanguage()].tab_photo, \"photo\") // Profile image management\n            .createTab(language[getLanguage()].tab_optional) // Additional fields (auto-populated)\n            // Configure user level dropdown with filtered options based on permissions\n            .addSelectFields('userLevel', gEmployeeLevel, null, null, true)\n            // Initialize the page with all configurations\n            .connectButton();\n        // Additional page interaction instance (appears unused - potential cleanup candidate)\n        // ...existing code...\n        // Legacy code - commented out field generation methods\n        // These have been replaced by the modern PageInteraction configuration above\n        // TODO: Remove commented code after confirming new implementation works correctly\n        // .generateImagePicker('photo')\n        // .generateSelectFromObject('titleOfCourtesy', employeeTitleCourtesy, false)\n        // .generateField('birthDate', false, 'input', 'date')\n        // .generateSelectFromObject('userLevel', employeeUserLevel, true)\n        // .generateSelectWithApi('reportsTo', PATH_API_EMPLOYEE, 'firstName', false);\n    });\n}\n// REGION 4: Common functions\n/**\n * Main employee page initialization function\n *\n * Loads the HTML template and initializes the employee management interface.\n * This is the entry point called by the routing system.\n *\n * @returns Promise that resolves when page is fully loaded and configured\n */\nexport default function employeePage() {\n    return __awaiter(this, void 0, void 0, function* () {\n        // Load the standard entity management template\n        const vHtml = yield fetch(FOLDER_TEMPLATE + TEMPLATE_VIEW_ENTITY)\n            .then(res => res.text());\n        // Inject template into main container\n        $(\"#main-container\").html(vHtml);\n        // Initialize page functionality\n        yield onLoad();\n    });\n}\n"],"names":[],"sourceRoot":""}